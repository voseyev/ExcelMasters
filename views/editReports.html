<!DOCTYPE html>
<include href="views/css.html">
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View/Edit Reports</title>
</head>
<body>
<nav class="navbar bg-light navbar-light">
    <h2>Inventory Management</h2>
    <a class="nav-item nav-link" href="/inventory_management/ExcelMasters/reports"><h4>Reports</h4></a>
    <a class="nav-item nav-link" href="/inventory_management/ExcelMasters/" id="logout">Logout</a>
</nav>
    <div class="container">
        <table id="datatable" class="table table-striped table-bordered display">
            <thead>
            <tr>
                <th>Report Title</th>
                <th>Uploaded date</th>
                <th>Delete?</th>
            </tr>

            </thead>
            <tbody>
            <repeat group="{{@reports}}" value="{{@report}}">
                <tr>
                    <td>{{@report['name']}}</td>
                    <td>{{@report['timestamp']}}</td>
                    <td><button name = "delete" id="delete{{@report['id']}}" value="{{@report['id']}}" class="btn btn-default">x</button></td>
                </tr>
            </repeat>

            </tbody>
        </table>


        <div class="row">
        <table id="datatable2" class="table table-striped table-bordered display">
            <thead>
            <tr>
                <th>Title</th>
                <th>Cost</th>
            </tr>

            </thead>
            <tbody>
            <repeat group="{{@data}}" value="{{@row}}">
                <tr>
                    <td>{{@row['title']}}</td>
                    <td><input type="text" placeholder="$$.$$" id="input{{@row['id']}}"><button id="{{@row['id']}}">Update</button></td>
                </tr>
            </repeat>

            </tbody>
        </table>
    </div>
    </div>
<script type="text/javascript">
    <repeat group="{{ @reports }}" value="{{ @report }}">
        $("#delete{{@report['id']}}").click(function()
        {
            var id = $(this).val();
            var deletion = confirm("Are you sure you want to delete this character");
            if(deletion)
            {

                $.post('{{@BASE}}/model/delete.php', {id: id}, function (data)
                {

                });
                location.reload(true);
            }
        });
    </repeat>
</script>

<script>
    <repeat group="{{@data}}" value="{{@row}}">
            $("#{{@row['id']}}").click(function()
            {
                var cost = $("#input{{@row['id']}}").val();
                var title = "{{@row['title']}}";
                var cosignor = "{{@row['cosignor']}}";
                var update = confirm("Are you sure you wish to update this cost?");
                if(update)
                {
                    $.post('{{@BASE}}/model/update.php', {title: title, cost: cost, cosignor: cosignor}, function (data)
                    {

                    });
                    location.reload(true);
                }
            });

    </repeat>
</script>
</body>
</html>